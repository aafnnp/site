---
date: '2022-08-30 15:05:22'
title: 'Chromeæ’ä»¶å¼€å‘ - Hooking into installs'
tags: [chrome]
description: åŸºäºreactã€tailwindcsså¼€å‘è‡ªå·±çš„chromeæ’ä»¶
---

å½“ä½ æƒ³ä¸ºç”¨æˆ·æä¾›ä¸€äº›é¢å¤–ä¿¡æ¯çš„æ—¶å€™

å½“ä½ æƒ³åœ¨ç”¨æˆ·å¸è½½çš„æ—¶å€™è§¦å‘æŸä¸ªæ“ä½œ

å½“ä½ å¸Œæœ›åœ¨æ›´æ–°çš„æ—¶å€™é‡å®šå‘åˆ°æ›´æ”¹æ—¥å¿—

æ‰©å±• hooks å°†éå¸¸æœ‰å¿…è¦

## åœ¨æµè§ˆå™¨æ‰©å±•ä¸­æ•è·`onInstall`æ“ä½œ

æ‰“å¼€`public/background.js`

```js
chrome.runtime.onInstall.addListener((details) => {
  // do something
})
```

è§¦å‘`onInstall`çš„å¯èƒ½æ“ä½œ

- install
- update
- chrome_update
- shared_module_update

ä»¥ä¸‹ä»£ç å±•ç¤ºäº†æ•è·å®‰è£…å’Œæ›´æ–°çš„åŠ¨ä½œ

```js
chrome.runtime.onInstalled.addListener((details) => {
  if (details.reason === 'install') {
    chrome.notifications.create({
      type: 'basic',
      iconUrl: 'icons/icon-48.png',
      title: 'Hi there ğŸ‘‹',
      message: 'Welcome to the best extensions you ever installed',
      buttons: [{title: 'Thanks ğŸ˜…ï¸'}],
      priority: 0
    })
  }

  if (details.reason === 'update') {
    chrome.notifications.create({
      type: 'basic',
      iconUrl: 'icons/icon-48.png',
      title: 'Thank you',
      message: 'For updating this extensions',
      buttons: [{title: 'Cool'}],
      priority: 0
    })
  }
})
```

å½“ä½ æƒ³åœ¨ç”¨æˆ·å¸è½½çš„æ—¶å€™ï¼Œå¯ä»¥é‡å®šå‘åˆ°æŸä¸ª url

```js
chrome.runtime.onInstalled.addListener(details => {
    chrome.runtime.setUninstallURL('https://manon.icu/');
}
```

## Source Code

[ã€Source Codeã€‘](https://github.com/rebelchris/popup-extension/tree/installs)
