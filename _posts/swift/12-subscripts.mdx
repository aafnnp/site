---
date: '2022-03-12'
title: Swift - 下标
tags: [swift]
description: 在 Swift 中，下标(subscript)是访问集合、列表或序列等值的快捷方式
cover: https://cdn.jsdelivr.net/gh/manonicu/pics@master/uPic/cnZKci.jpg
---

在 Swift 中，下标(subscript)是访问集合、列表或序列等值的快捷方式。类似于使用索引访问数组元素，下标可以使我们通过自定义的方式访问和修改集合、列表或序列中的元素。下标可以看作是一个参数化的属性，可以使用中括号([])来访问。

Swift 中的下标可以定义为只读、读写或可写，类似于计算属性。根据需要，下标可以接受任意数量的参数，并且参数可以是任何类型。下标的语法如下所示：

```swift
subscript(index: Int) -> Int {
    get {
        // 返回给定索引的值
    }
    set(newValue) {
        // 在给定索引处设置一个新值
    }
}
```

在上面的示例中，我们定义了一个接受一个整数参数并返回一个整数值的下标。下标有一个 get 和一个 set 方法。get 方法返回给定索引的值，set 方法将给定索引处的元素设置为新值。

下标也可以使用多个参数，如下所示：

```swift
struct Matrix {
    let rows: Int, columns: Int
    var grid: [Double]

    init(rows: Int, columns: Int) {
        self.rows = rows
        self.columns = columns
        grid = Array(repeating: 0.0, count: rows * columns)
    }

    subscript(row: Int, column: Int) -> Double {
        get {
            assert(row >= 0 && row < rows && column >= 0 && column < columns, "Index out of range")
            return grid[(row * columns) + column]
        }
        set {
            assert(row >= 0 && row < rows && column >= 0 && column < columns, "Index out of range")
            grid[(row * columns) + column] = newValue
        }
    }
}

var matrix = Matrix(rows: 2, columns: 2)
matrix[0, 0] = 1.0
matrix[0, 1] = 2.0
matrix[1, 0] = 3.0
matrix[1, 1] = 4.0

print(matrix[0, 0])
print(matrix[0, 1])
print(matrix[1, 0])
print(matrix[1, 1])
```

在上面的示例中，我们定义了一个 Matrix 结构体，它有 rows、columns 和 grid 三个属性。我们还定义了一个接受两个整数参数并返回一个 Double 类型值的下标。get 方法返回给定索引处的元素，set 方法将给定索引处的元素设置为新值。在这里，我们使用了断言来确保给定的索引处于合法范围内，否则会抛出一个运行时错误。

下标是 Swift 语言中非常有用的功能，使我们可以轻松地访问和修改集合、列表或序列中的元素。下标可以使用任意数量和任意类型的参数，因此可以根据需要进行自定义。通过定义下标，我们可以使代码更加简洁、直观和易于理解。
