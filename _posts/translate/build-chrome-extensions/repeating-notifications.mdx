---
date: '2022-08-28 14:22:23'
title: 'Chromeæ’ä»¶å¼€å‘ - Repeating notifications'
tags: [chrome]
description: åŸºäºreactã€tailwindcsså¼€å‘è‡ªå·±çš„chromeæ’ä»¶
---

åœ¨å‰ä¸€ç¯‡æ–‡ç« ä»‹ç»äº†[Adding browser notification](/blog/translate/build-chrome-extenstions/adding-browser-notification)ï¼Œè¿™ç¯‡å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºé‡å¤çš„é€šçŸ¥ã€‚

## åˆ›å»ºé‡å¤é€šçŸ¥

ä¸ºäº†å®ç°é‡å¤é€šçŸ¥ï¼Œæˆ‘ä»¬å¿…é¡»åˆ©ç”¨[alarm api](https://developer.chrome.com/docs/extensions/reference/alarms/)ã€‚è¿™å…è®¸æˆ‘ä»¬åˆ›å»ºå¯ä»¥åœ¨æŒ‡å®šæ—¶é—´å‘èµ·é€šçŸ¥ã€‚

é¦–å…ˆæ›´æ–°`manifest.json`ï¼Œä»¥ä¾¿è·å–ä½¿ç”¨`alarm`æƒé™

```json
{
  "permissions": ["alarm", "notifications"]
}
```

å®šæ—¶å‘èµ·é€šçŸ¥éœ€è¦åå°è¿è¡Œçš„æœåŠ¡ï¼Œåœ¨ v3 manifestï¼Œå¯ä»¥æ³¨å†Œä¸€ä¸ªåå°æœåŠ¡

```json
{
  "background": {
    "service_worker": "background.js"
  }
}
```

ç„¶åä¿®æ”¹`App.jsx`

```jsx
export function App() {
  const createNotification = () => {
    chrome.alarms.create({
      periodInMinutes: 1
    })
    window.close()
  }

  const stopNotification = () => {
    chrome.alarms.clearAll()
    window.close()
  }
  return (
    <div className="flex flex-col items-center justify-center w-screen h-auto bg-indigo-400 p-4">
      <button
        className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 text-2xl px-4 rounded"
        onClick={createNotification}
      >
        Motivate me ğŸ‰
      </button>
      <br />
      <button
        className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 text-2xl px-4 rounded"
        onClick={stopNotification}
      >
        Stop motivating me ğŸ˜…
      </button>
    </div>
  )
}
```

ä¿®æ”¹`background.js`

```js
chrome.alarms.onAlarm.addListener(() => {
  chrome.notifications.create({
    type: 'basic',
    iconUrl: 'icons/icon-48.png',
    title: 'Hi there ğŸ‘‹',
    message: 'Just a reminder that you rock!',
    buttons: [{ title: 'I know â˜ºï¸' }],
    priority: 0,
  });
});
```

## Source Code

[ã€Source Codeã€‘](https://github.com/rebelchris/popup-extension/tree/weather)
