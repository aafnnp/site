---
date: '2020-05-19'
title: '闭包'
tags: [javascript]
---

![](https://cdn.jsdelivr.net/gh/funnypan/pics@master/img/20200413141906.png)

## 闭包

1. 定义在函数内部的函数
2. 将函数内部和外部连接起来
3. 可以读取函数内部的变量
4. 让变量的值始终保存在内存中

```javascript
var name = 'The Window';
var object = {
  name: 'My Object',
  getNameFunc: function () {
    return function () {
      return this.name;
    };
  },
};
alert(object.getNameFunc()()); // The window

var name = 'The Window';
var object = {
  name: 'My Object',
  getNameFunc: function () {
    var that = this;
    return function () {
      return that.name;
    };
  },
};
alert(object.getNameFunc()()); // My Object
```

## 对闭包的理解

使⽤闭包主要是为了设计私有的⽅法和变量。闭包的优点是可以避免全局变量的污染，缺点是闭包会常驻内存，会增⼤内存使⽤量，使⽤不当很容易造成内存泄露。在 js 中，函数即闭包，只有函数才会产⽣作⽤域的概念

闭包 的最⼤⽤处有两个，⼀个是可以读取函数内部的变量，另⼀个就是让这些变量始终保持在内存中闭包的另⼀个⽤处，是封装对象的私有属性和私有⽅法

- 好处：能够实现封装和缓存等；
- 坏处：就是消耗内存、不正当使⽤会造成内存溢出的问题

## 使⽤闭包的注意点

由于闭包会使得函数中的变量都被保存在内存中，内存消耗很⼤，所以不能滥⽤闭包，否则会造成⽹⻚的性能问题，在 IE 中可能导致内存泄露

解决⽅法是，在退出函数之前，将不使⽤的局部变量全部删除
