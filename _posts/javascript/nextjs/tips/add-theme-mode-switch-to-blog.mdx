---
date: '2022-11-24 15:26:00'
title: 'Next.js - Switch Theme Mode'
tags: [Nextjs, javascript, react]
description: ä»æ€§èƒ½ã€æ‰“åŒ…å¤§å°ã€SEOæ¥çœ‹ï¼ŒNext.jså¯èƒ½æ˜¯æœ€é€‚åˆå†™blogçš„Reactæ¡†æ¶ã€‚
cover: https://cdn.jsdelivr.net/gh/manonicu/pics@master/uPic/mode.gif
---

## å‰ç½®

[ã€ä¸Šä¸€ç¯‡ã€‘](/blog/javascript/nextjs/tips/build-blog-with-nextjs)å®Œæˆäº†ä½¿ç”¨ Next.js æ„å»º blogã€‚

**æ³¨æ„**

ä¸»é¢˜åˆ‡æ¢åŸºäº`chakra-ui`ã€`tailwindcss(å¯é€‰)`ï¼Œchakra-ui å’Œ tailwind.css éƒ½å†…ç½®æ”¯æŒé¢œè‰²æ¨¡å¼

> chakra-ui å°†é¢œè‰²æ¨¡å¼å˜é‡å€¼å­˜å‚¨åœ¨`localstorage`ä¸­ï¼Œä»¥ç¡®ä¿æŒä¹…åŒ–

è¯¦ç»†æ–‡æ¡£å‚è€ƒ[Color Mode](https://chakra-ui.com/docs/styled-system/color-mode)

```bash
pnpm install react-icons
```

## è®¾ç½®

æ–°å¢`utils/theme.ts`

```ts
import {extendTheme, type ThemeConfig} from '@chakra-ui/react'

const theme = extendTheme({
  config: {
    initialColorMode: 'system',
    useSystemColorMode: true
  } as ThemeConfig,
  fonts: {
    heading: `'Dosis', sans-serif`
  }
})

export default theme
```

## ä¿®æ”¹\_document.js

```tsx
// pages/_document.js

import {ColorModeScript} from '@chakra-ui/react'
import NextDocument, {Html, Head, Main, NextScript} from 'next/document'
import theme from './theme'

export default class Document extends NextDocument {
  render() {
    return (
      <Html lang="en">
        <Head />
        <body>
          {/* ğŸ‘‡ Here's the script */}
          <ColorModeScript initialColorMode={theme.config.initialColorMode} />
          <Main />
          <NextScript />
        </body>
      </Html>
    )
  }
}
```

æ–°å¢`components/DarkModeSwitch/index.tsx`

```tsx
import {useColorMode, Box} from '@chakra-ui/react'
import {BsMoonFill, BsFillSunFill} from 'react-icons/bs'

const DarkModeSwitch = () => {
  const {colorMode, toggleColorMode} = useColorMode()
  return (
    <Box
      as="div"
      position="absolute"
      top={4}
      right={4}
      zIndex={9999}
      onClick={toggleColorMode}
    >
      {colorMode === 'light' ? (
        <BsMoonFill size={18} />
      ) : (
        <BsFillSunFill size={18} />
      )}
    </Box>
  )
}

export default DarkModeSwitch
```

ä¿®æ”¹`pages/_app.tsx`

```tsx
import dynamic from 'next/dynamic'
import Head from 'next/head'
import React from 'react'
import {ChakraProvider} from '@chakra-ui/react'
import theme from 'utils/theme'

// æ–°å¢
const DarkModeSwitch = dynamic(() => import('components/DarkModeSwitch'),{ssr:false})

const App = ({Component, pageProps, router}) => {
  const {route} = router
  const url = `https://manon.icu${route}`

  return (
    <>
      <Head>
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=5"
        />
        <meta httpEquiv="X-UA-Compatible" content="ie=edge" />
        <meta name="description" content="Manon.icu,homepage" />
        <title>Manon.icu | Home</title>
      </Head>
      <ChakraProvider theme={theme}>
        {/* æ–°å¢ */}
        <DarkModeSwitch />
        <Component {...pageProps} canonical={url} key={url} />
      </ChakraProvider>
    </>
  )
}

export default App
```

[Source Code](https://github.com/Manonicu/blog-demo/tree/feat-switch-theme-mode)
